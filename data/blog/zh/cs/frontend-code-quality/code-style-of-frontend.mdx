---
title: ä¸º Angular é¡¹ç›®è½åœ°ä»£ç è§„èŒƒå·¥å…·é“¾
date: '2024-05-27'
tags: ['å‰ç«¯å·¥ç¨‹åŒ–', 'ä»£ç è§„èŒƒ']
summary: 'æ¢³ç† ESLintã€Prettierã€Husky ç­‰å·¥å…·åœ¨ Angular é¡¹ç›®çš„ååŒé…ç½®ã€‚'
draft: false
---

æœ¬ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•å¿«é€Ÿä¸ºAngularé¡¹ç›®å¼€å¯ä»£ç è§„èŒƒå·¥å…·ã€‚

[The Importance of unified code style in large scaled applications](https://medium.com/carvago-development/the-importance-of-unified-code-style-in-large-scaled-applications-6c0487ebc12e)

`ESLint`, `typescript-eslint`, `Angular ESLint`, `prettier-eslint`, `eslint-config-prettier`, `eslint-plugin-prettier`, `prettier-eslint-cli`ç­‰åè¯å¤ªå¤šå•¦ï¼Œå‚»å‚»åˆ†ä¸æ¸…ï¼Ÿæ›´åˆ«è¯´è¿˜æœ‰`Prettier`, `lint-staged`, `husky`, `stylelint`, `commitlint`, `mrm`ç­‰å·¥å…·ã€‚å¦‚æœè¦å†åŠ ä¸Š`VS Code`çš„æ’ä»¶çš„è¯ï¼Œé‚£å°±è¿˜æœ‰`prettier-vscode`, `vscode-eslint`, `vs-code-prettier-eslint`, `vscode-stylelint`, `vscode-commitlint`ç­‰ç­‰ï¼Œæ•°ä¸èƒœæ•°ã€‚

æœ¬ç¯‡åšå®¢ä»åº”ç”¨çš„è§’åº¦ï¼Œè®°å½•å¦‚ä½•åº”ç”¨è¿™äº›å·¥å…·ï¼Œå®ç°ä»£ç çš„é£æ ¼ç»Ÿä¸€å’Œä»£ç è´¨é‡ã€‚

# enables ESLint to lint Angular projects

## å®‰è£…

é¦–å…ˆåœ¨é¡¹ç›®ä¸­ä½¿ç”¨Angularçš„schematicsç‰¹æ€§å¿«é€Ÿæ·»åŠ å’Œé…ç½®`ESLint`ã€‚

```sh
ng add @angular-eslint/schematics
```

è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹è¿™ä¸ªåŸç†å›¾å®é™…åšäº†äº›ä»€ä¹ˆã€‚é¦–å…ˆï¼Œåœ¨`package.json`æ–‡ä»¶ä¸­æ·»åŠ äº†ç›¸å…³çš„ä¾èµ–å’ŒæŒ‡ä»¤ã€‚

```json
{
  "scripts": {
    "test": "ng test",
    "lint": "ng lint"
  },
  "devDependencies": {
    "@angular-eslint/builder": "17.5.1",
    "@angular-eslint/eslint-plugin": "17.5.1",
    "@angular-eslint/eslint-plugin-template": "17.5.1",
    "@angular-eslint/schematics": "17.5.1",
    "@angular-eslint/template-parser": "17.5.1",
    "@typescript-eslint/eslint-plugin": "7.10.0",
    "@typescript-eslint/parser": "7.10.0",
    "eslint": "^8.57.0"
  }
}
```

å…¶æ¬¡ï¼Œåœ¨`angular.json`ä¸­æ·»åŠ äº†å¯¹åº”çš„é…ç½®ã€‚

```json
{
  "projects": {
    "architect": {
      "lint": {
        "builder": "@angular-eslint/builder:lint",
        "options": {
          "lintFilePatterns": ["src/**/*.ts", "src/**/*.html"]
        }
      }
    }
  },
  "cli": {
    "schematicCollections": ["@angular-eslint/schematics"]
  }
}
```

æ–°å»ºä¸€ä¸ª`.eslintrc.json`æ–‡ä»¶ï¼Œè¿›è¡Œ`typescript`å’Œ`angular`é£æ ¼çš„`eslint`çš„linté…ç½®ã€‚

```json
{
  "root": true,
  "ignorePatterns": ["projects/**/*"],
  "overrides": [
    {
      "files": ["*.ts"],
      "extends": [
        "eslint:recommended",
        "plugin:@typescript-eslint/recommended",
        "plugin:@angular-eslint/recommended",
        "plugin:@angular-eslint/template/process-inline-templates"
      ],
      "rules": {
        "@angular-eslint/directive-selector": [
          "error",
          {
            "type": "attribute",
            "prefix": "app",
            "style": "camelCase"
          }
        ],
        "@angular-eslint/component-selector": [
          "error",
          {
            "type": "element",
            "prefix": "app",
            "style": "kebab-case"
          }
        ]
      }
    },
    {
      "files": ["*.html"],
      "extends": [
        "plugin:@angular-eslint/template/recommended",
        "plugin:@angular-eslint/template/accessibility"
      ],
      "rules": {}
    }
  ]
}
```

## ä½¿ç”¨

å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥å°è¯•ä¿®å¤ä»£ç ä¸­çš„è­¦å‘Šã€‚

```sh
# --fix:  Fixes linting errors (may overwrite linted files).
ng lint --fix
# or
npm run lint --fix
```

å¦‚æœåªéœ€è¦ä½¿ç”¨`ESLint`ï¼Œé‚£ä¹ˆåˆ°è¿™é‡Œå°±ç»“æŸäº†ã€‚å¦‚æœè¿˜éœ€è¦æ­é…`prettier`ç­‰å·¥å…·ä¸€èµ·ä½¿ç”¨ï¼Œè¯·ç»§ç»­å¾€ä¸‹çœ‹ã€‚

# enables Prettier

## å®‰è£…

```sh
npm install prettier --save-dev
```

ç„¶åæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼š`.prettierrc.json`å’Œ`.prettierignore`ã€‚`.prettierignore`é…ç½®å“ªäº›æ–‡ä»¶ä¸éœ€è¦è¢«æ ¼å¼åŒ–ï¼Œå¯ä»¥å¤§å¤§ç¼©çŸ­æ ¼å¼åŒ–æ—¶é—´ã€‚å¯¹åº”çš„æ–‡ä»¶é…ç½®éƒ½å¯ä»¥åœ¨äº’è”ç½‘ä¸ŠæŸ¥è¯¢åˆ°ç›¸å…³çš„é…ç½®ã€‚

è¿™é‡Œæˆ‘å€Ÿé‰´äº†ç½‘ç»œä¸Šä¸€ä½å¤§ä½¬çš„é…ç½®ã€‚

```json
{
  "tabWidth": 2,
  "useTabs": false,
  "singleQuote": true,
  "semi": true,
  "bracketSpacing": true,
  "arrowParens": "avoid",
  "trailingComma": "es5",
  "bracketSameLine": true,
  "printWidth": 80,
  "endOfLine": "auto"
}
```

## ä½¿ç”¨

å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç®€å•åœ°ä½¿ç”¨`prettier`:

```sh
npx prettier --write . --ignore
```

ä½†å¦‚æœéœ€è¦æŠŠ`linter`å’Œ`prettier`ä¸€èµ·ä½¿ç”¨ï¼Œæœ‰äº›è§„åˆ™ä¼šå†²çªï¼Œä½ ä¼šå‘ç°æ ¼å¼åŒ–å®Œ`eslint`åˆæŠ¥é”™äº†ï¼Œä¿®å¤ååˆä¸ç¬¦åˆ`prettier`è§„èŒƒäº†ã€‚è¿™äº›è§„åˆ™è¦è‡ªå·±ä¿®æ”¹çš„è¯å¾ˆç¹çï¼Œè¿˜å¥½`eslint-config-prettier`ä¸ºæˆ‘ä»¬æä¾›äº†æ”¯æŒã€‚

# enable eslint-config-prettier & eslint-plugin-prettier

## eslint-config-prettier & eslint-plugin-prettier & prettier-eslint åŒºåˆ«ç®€è¿°

- `eslint-config-prettier` ä¼šé…ç½®å¦‚ä½•å¤„ç†eslintå’Œprettierè§„åˆ™é—´çš„å·®å¼‚ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œå·®å¼‚ä¸å¯è§ï¼Œæ²¡æœ‰å·®å¼‚
- `eslint-plugin-prettier` ä½¿prettierä½œä¸ºeslintæ’ä»¶çš„å½¢å¼ï¼Œæ¯æ¬¡æ‰§è¡Œeslintä¼šæ‰§è¡Œprettieræ£€æŸ¥
- `prettier-eslint` æ˜¯ä¸€ä¸ªå°† Prettier å’Œ ESLint ç»“åˆä½¿ç”¨çš„å·¥å…·ã€‚å®ƒå…ˆä½¿ç”¨ Prettier æ ¼å¼åŒ–ä»£ç ï¼Œç„¶åå†é€šè¿‡ ESLint è¿›è¡Œä¿®å¤

## å®‰è£…

`prettier-eslint` æ˜¯å¯é€‰çš„ï¼Œå¦‚æœ`npm install --save-dev prettier-eslint-cli`å®‰è£…ä¸Šäº†å°±å¯ä»¥æ·»åŠ å¦‚ä¸‹è„šæœ¬

```json
{
  "scripts": {
    "format": "prettier-eslint \"src/**/*.js\""
  }
}
```

è¿›å…¥æ­£é¢˜ï¼š

```sh
npm install prettier-eslint-cli eslint-config-prettier eslint-plugin-prettier --save-dev
```

ç„¶ååœ¨`.eslintrc.json`ä¸­çš„æ¯ä¸ªéœ€è¦çš„`extends`çš„**æœ€åä¸€è¡Œ**æ·»åŠ ï¼š

```json
{
  "extends": ["plugin:prettier/recommended"]
}
```

å› ä¸ºè¿˜æœ‰ä¸€äº›é¢å¤–çš„é…ç½®ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å‚è€ƒä¸‹é¢çš„å†…å®¹:

```json
{
  "root": true,
  "ignorePatterns": ["projects/**/*"],
  "overrides": [
    {
      "files": ["*.ts"],
      "extends": [
        "eslint:recommended",
        "plugin:@typescript-eslint/recommended",
        "plugin:@angular-eslint/recommended",
        "plugin:@angular-eslint/template/process-inline-templates",
        "plugin:prettier/recommended"
      ],
      "rules": {
        "@angular-eslint/directive-selector": [
          "error",
          {
            "type": "attribute",
            "prefix": "app",
            "style": "camelCase"
          }
        ],
        "@angular-eslint/component-selector": [
          "error",
          {
            "type": "element",
            "prefix": "app",
            "style": "kebab-case"
          }
        ]
      }
    },
    {
      "files": ["*.html"],
      "extends": [
        "plugin:@angular-eslint/template/recommended",
        "plugin:@angular-eslint/template/accessibility"
      ],
      "rules": {}
    },
    {
      "files": ["*.html"],
      "excludedFiles": ["*inline-template-*.component.html"],
      "extends": ["plugin:prettier/recommended"],
      "rules": {
        "prettier/prettier": ["error", { "parser": "angular" }]
      }
    }
  ]
}
```

è¿™æ ·ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå½“æ‰§è¡Œå®Œ`lint`ä¹‹åï¼Œä¼šç»§ç»­æ‰§è¡Œ`prettier`æ£€æŸ¥ï¼Œå¹¶å°†æŠ¥é”™æç¤ºåœ¨`eslint`çš„ä¿¡æ¯ç•Œé¢ã€‚

```sh
âœ  frontend-formatter-demo git:(main) âœ— npm run lint

> frontend-formatter-demo@0.0.0 lint
> ng lint


Linting "frontend-formatter-demo"...

~/frontend-formatter-demo/src/app/app.component.ts
  12:10  error  Delete `Â·`                                prettier/prettier
  12:11  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any

âœ– 2 problems (2 errors, 0 warnings)
  1 error and 0 warnings potentially fixable with the `--fix` option.

Lint errors found in the listed files.
```

ä¿®å¤ä¹Ÿå¾ˆç®€å•ï¼Œæœ€å¥½è¿˜æ˜¯æŒ¨ä¸ªä¿®å¤æˆ–è€…ä½¿ç”¨`prettier-eslint`ã€‚

# ä¸ VS Code é›†æˆ

å‰ç«¯ç¼–è¾‘å™¨ï¼Œç°åœ¨æœ€æµè¡Œçš„éVS Codeè«å±ï¼Œç‰¹åˆ«æ˜¯ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ï¼Œæ›´æ˜¯è®©å¼€å‘è€…äº‹åŠåŠŸå€ã€‚æœ‰å…´è¶£çš„è¯è¿˜å¯ä»¥ç»§ç»­ç ”ç©¶ä¸€ä¸‹æ€ä¹ˆå®‰è£…VS Code æ’ä»¶è¿›è¡Œé£æ ¼åŒ–ã€‚

åœ¨æ ¹ç›®å½•çš„`.vscode`ç›®å½•ä¸‹æ–°å»º`settings.json`æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹é…ç½®ï¼š

```json
{
  "[html]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode",
    "editor.codeActionsOnSave": {
      "source.fixAll.eslint": "always"
    },
    "editor.formatOnSave": true
  },
  "[typescript]": {
    "editor.defaultFormatter": "rvest.vs-code-prettier-eslint",
    "editor.codeActionsOnSave": {
      "source.fixAll.eslint": "always"
    },
    "editor.formatOnSave": true,
    "editor.suggest.snippetsPreventQuickSuggestions": false,
    "editor.inlineSuggest.enabled": true
  }
}
```

`extensions.json`å¯ä»¥åˆ—å‡ºæ¨èå®‰è£…çš„æ’ä»¶ï¼Œå½“æ‰“å¼€æ’ä»¶æ ‡ç­¾é¡µçš„æ—¶å€™ï¼Œå°±ä¼šæ˜¾ç¤ºæ¨èçš„æ’ä»¶ã€‚å±æ€§å€¼å¡«å†™`Unique Identifier`ï¼Œèƒ½åœ¨å¯¹åº”çš„[visualstudio marketplace](https://marketplace.visualstudio.com)ä¸Šæ‰¾åˆ°ã€‚

```json
{
  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=827846
  "recommendations": [
    "angular.ng-template",
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "rvest.vs-code-prettier-eslint"
  ]
}
```

è¿™æ ·å·¥ä½œåŒºå°±ä¼šæ‹¥æœ‰è¿™äº›é…ç½®ï¼Œå½“å³é”®é€‰æ‹©æ ¼å¼åŒ–çš„æ—¶å€™å°±ä¼šä»¥è¿™äº›æ’ä»¶è¿›è¡Œï¼Œå…·ä½“çš„æ ¼å¼ä¼šæ‰«æå·¥ä½œåŒºä¸­çš„å¯¹åº”é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å†™å¥½çš„`.eslintrc.json`å’Œ`.prettierrc.json`ç­‰ç­‰ã€‚

åˆ°è¿™é‡Œå°±å®Œæˆäº†æ‰€æœ‰é…ç½®å•¦ã€‚æ˜å¤©ç»§ç»­è®°å½•å’Œ`lint-staged`, `husky`ç­‰å·¥å…·çš„é›†æˆã€‚

# Husky & lint-staged

ä¹¦æ¥ä¸Šæ–‡ï¼Œå¦‚æœä½ é€›Githubçš„è¯ï¼Œå°±ä¼šå‘ç°å¾ˆå¤šé¡¹ç›®æ ¹ç›®å½•é™¤äº†`.github`è¿˜æœ‰ä¸ª`.husky`æ–‡ä»¶å¤¹ï¼Œæˆ‘ä¸€ç›´å¥½å¥‡è¿™ä¸ªæ–‡ä»¶å¤¹çš„ä½œç”¨ã€‚ä»Šå¤©æ­£å¥½åˆ›å»ºäº†ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå€Ÿæ­¤æœºä¼šä¸€æ¢ç©¶ç«Ÿã€‚

## äº†è§£Git Hooks

Git Hooks æ˜¯åœ¨ Git æ‰§è¡Œç‰¹å®šäº‹ä»¶ï¼ˆå¦‚commitã€pushã€receiveç­‰ï¼‰æ—¶è§¦å‘è¿è¡Œçš„**è„šæœ¬**ï¼ˆä¹Ÿå°±æ˜¯Shellï¼ŒPythonç­‰è¯­è¨€éƒ½å¯ä»¥ï¼‰ï¼Œç±»ä¼¼äºâ€œé’©å­å‡½æ•°â€ã€‚è·Ÿé’©å­å‡½æ•°ä¸€æ ·ï¼ŒGit Hookså¯ä»¥èµ·åˆ°ä¸€ä¸ªæ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ã€‚

Git Hooksæ˜¯Gitæä¾›çš„ç‰¹æ€§ã€‚é’©å­éƒ½è¢«å­˜å‚¨åœ¨ Git ç›®å½•ä¸‹çš„ hooks å­ç›®å½•ä¸­ã€‚ ä¹Ÿå³ç»å¤§éƒ¨åˆ†é¡¹ç›®ä¸­çš„ .git/hooks ã€‚ å½“ä½ ç”¨ git init åˆå§‹åŒ–ä¸€ä¸ªæ–°ç‰ˆæœ¬åº“æ—¶ï¼ŒGit é»˜è®¤ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸­æ”¾ç½®ä¸€äº›ç¤ºä¾‹è„šæœ¬ã€‚é’©å­åˆå¯ä»¥åˆ†ç±»ä¸ºå®¢æˆ·ç«¯é’©å­å’ŒæœåŠ¡å™¨ç«¯é’©å­ã€‚å®¢æˆ·ç«¯é’©å­åˆ†ä¸ºå¾ˆå¤šç§ã€‚ ä¸‹é¢æŠŠå®ƒä»¬åˆ†ä¸ºï¼šæäº¤å·¥ä½œæµé’©å­ã€ç”µå­é‚®ä»¶å·¥ä½œæµé’©å­å’Œå…¶å®ƒé’©å­ã€‚å¦‚æœæƒ³äº†è§£æ›´å¤šå…³äºGit Hooksçš„ç»†èŠ‚ï¼Œè¯·å‚è€ƒ[Gitå®˜æ–¹æ–‡æ¡£ï¼ˆGit é’©å­ï¼‰](https://git-scm.com/book/zh/v2/è‡ªå®šä¹‰-Git-Git-é’©å­)

### Git Hookså­˜åœ¨çš„é—®é¢˜

ç”±äºGit Hooksé»˜è®¤æ˜¯å­˜åœ¨`.git`ç›®å½•ä¸‹çš„ï¼Œæ— æ³•è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚å¥½åœ¨Gitæ–°ç‰ˆæœ¬ä¸­`core.hooksPath`çš„å‡ºç°å¯ä»¥ä½¿Hookså­˜æ”¾çš„è·¯å¾„æŒ‡å‘è‡ªå®šä¹‰çš„ç›®å½•ã€‚

## husky

ä¸ºä»€ä¹ˆéœ€è¦åœ¨git hooksä¸Šå†å¤šhuskyè¿™ä¸ªä¸Šå±‚å»ºç­‘å‘¢ï¼Ÿç®€è€Œè¨€ä¹‹ï¼Œ**å®ƒèƒ½å¤Ÿç®€åŒ–åˆ›å»ºå’Œä¿®æ”¹Githooksçš„æ“ä½œ**ã€‚

### å®‰è£…husky

æ ¹æ®[huskyå®˜æ–¹æ–‡æ¡£](https://typicode.github.io/husky/getting-started.html)ï¼Œé¦–å…ˆå®‰è£…ä¾èµ–

```sh
npm install --save-dev husky
```

ç„¶åæ‰§è¡Œï¼š

```sh
npx husky init
```

å®ƒä¼šï¼š

1. æ·»åŠ `prepare`è„šæœ¬åˆ°`package.json`
2. åˆ›å»ºä¸€ä¸ªæ¨¡æ¿`pre-commit`é’©å­
3. é…ç½®Git hooksè·¯å¾„åˆ°`.husky`

## lint-staged

lint-staged æ˜¯ä¸€ä¸ªåœ¨ **git æš‚å­˜æ–‡ä»¶(staged)** ä¸Šè¿è¡Œ linters çš„å·¥å…·ã€‚

å®˜æ–¹çš„åŸæ–‡æ˜¯ï¼š

> Run linters against staged git files and don't let ğŸ’© slip into your code base!

å®ƒçš„å¥½å¤„æ˜¯ï¼š

> But running a lint process on a whole project is slow, and linting results can be irrelevant. Ultimately you only want to lint files that will be committed.

### å®‰è£… lint-staged

```sh
npm install --save-dev lint-staged
```

ç„¶åé…ç½®`package.json`æ·»åŠ å†…å®¹ï¼š

```json
"lint-staged": {
  "*.{js, jsx,ts,tsx}": [
    "eslint --fix"
  ],
  "*.{json,js,ts,jsx,tsx,html}": [
    "prettier --write --ignore-unknown"
  ]
},
```

ï¼ˆå…¶å®æˆ‘æ„Ÿè§‰è¿™é‡Œ`prettier`ä¹Ÿä¸æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºä½¿ç”¨äº†`eslint-plugin-prettier`æ’ä»¶ï¼Œå®é™…ä¸Š`prettier`æ˜¯ä»¥`eslint`æ’ä»¶çš„å½¢å¼å­˜åœ¨çš„ï¼Œæ¯æ¬¡æ‰§è¡Œlintå°±ä¼šæ‰§è¡Œprettierï¼Œä¸‹æ–‡`stylelint`ä¹Ÿæ˜¯åŒç†ã€‚ï¼‰

ç„¶åä¿®æ”¹`.husky/pre-commit`

```sh
npx lint-staged
```

è¿™æ ·åœ¨æ¯æ¬¡commitä¹‹å‰éƒ½ä¼šæ‰§è¡Œ`npx lint-staged`ï¼Œæ‰§è¡Œ`int-staged`å¹¶è¯»å–ä¸Šé¢çš„`int-staged`é…ç½®ï¼Œå¦‚æœæ‰§è¡Œå¤±è´¥å‘¢ï¼Œå°±ä¸ä¼š`commit`æˆåŠŸã€‚ï¼ˆå¦‚æœä¸æ¸…æ¥šnpmå’Œnpxçš„åŒºåˆ«ï¼Œè¯·å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼š[npm å’Œ npx æ˜¯ä»€ä¹ˆ](../npx_vs_npm)ï¼‰

# commitlint

ä»ä¸Šæ–‡å°±å¯ä»¥å¾—çŸ¥ï¼Œlintæ˜¯ä¸€ç±»æŒ‰ç…§è§„åˆ™æ‰§è¡Œæ£€æŸ¥çš„å·¥å…·ï¼Œcommitlintå°±æ˜¯ä¸€ä¸ª`git commit`æ ¡éªŒçº¦æŸå·¥å…·ã€‚å®ƒè¦æ±‚æˆ‘ä»¬çš„æäº¤è®°å½•ç¬¦åˆ[conventional-commits](https://github.com/conventional-commits/conventionalcommits.org)è§„èŒƒã€‚

## å®‰è£…

```sh
npm install --save-dev @commitlint/{config-conventional,cli}
echo "module.exports = {extends: ['@commitlint/config-conventional']}" > commitlint.config.js
```

ç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®è¯¦ç»†çš„è§„åˆ™ã€‚

### è§„åˆ™

è¯¦ç»†è§„åˆ™å‚è€ƒï¼š[å®˜æ–¹æ–‡æ¡£](https://commitlint.js.org/#/reference-rules)ã€‚

#### Angularçš„æ¡ˆä¾‹

ä¸åŒçš„ç¼–ç¨‹è¯­è¨€è¿˜è´´å¿ƒåœ°ç»™å‡ºäº†ä¸åŒçš„æäº¤è§„èŒƒï¼Œä¸€èˆ¬æˆ‘åªéœ€è¦å§extendsçš„ç±»å‹ä¿®æ”¹ä¸€ä¸‹å³å¯ã€‚

```sh
npm install --save-dev @commitlint/config-angular @commitlint/cli
echo "module.exports = {extends: ['@commitlint/config-angular']};" > commitlint.config.js
```

### ä¸huskyçš„ç»“åˆ

å¾€`.husky/commit-msg`æ–‡ä»¶å†™å…¥ï¼š

```sh
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

npx --no -- commitlint --edit "$1"
```

è¿™æ ·ï¼Œå¦‚æœæäº¤ä¸ç¬¦åˆè§„èŒƒï¼Œå°±ä¸èƒ½æˆåŠŸcommitåˆ°gitåº“äº†ã€‚

```txt
[COMPLETED] Cleaning up temporary files...
â§—   input: commit msg test
âœ–   subject may not be empty [subject-empty]
âœ–   type may not be empty [type-empty]

âœ–   found 2 problems, 0 warnings
â“˜   Get help: https://github.com/conventional-changelog/commitlint/#what-is-commitlint

husky - commit-msg script failed (code 1)
```

# stylelint

æŒ‰ç†è¯´ï¼Œeslintå’Œstylelintä¸€æ ·ï¼Œéœ€è¦enable stylelint-config-prettier & stylelint-plugin-prettierç­‰ç­‰ï¼Œ ä½†æ˜¯

> As of Stylelint v15 all style-related rules have been deprecated. If you are using v15 or higher and are not making use of these deprecated rules, this plugin is no longer necessary.

æ‰€ä»¥åªéœ€è¦é…ç½®`stylelint-prettier`å³å¯ã€‚

## å®‰è£…

```sh
npm i -D stylelint stylelint-config-standard-scss stylelint-prettier postcss stylelint-config-sass-guidelines
```

## é…ç½®

æ–°å»º`.stylelintrc.json`æ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼š

```json
{
  "extends": [
    "stylelint-config-standard-scss",
    "stylelint-config-sass-guidelines",
    "stylelint-prettier/recommended"
  ]
}
```

å¹¶ä¿®æ”¹å®Œå–„`packages.json`ä¸­çš„`lint-staged`é…ç½®å¦‚ä¸‹ï¼š

```json
"lint-staged": {
  "*.{js,jsx,ts,tsx}": [
    "eslint --fix"
  ],
  "*.{json,js,ts,jsx,tsx,html}": [
    "prettier --write --ignore-unknown"
  ],
  "*.{css,scss}": "stylelint --fix"
},
```

å³å¯ã€‚

# æœ€ç»ˆæµ‹è¯•

ä¿®æ”¹`app.component.ts`çš„å†…å®¹å¦‚ä¸‹ï¼š

```ts
export class AppComponent {
  title: any = 'frontend-formatter-demo'
}
```

ç„¶åæäº¤å‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼š

```
âœ– eslint --fix:

/Users/terry/Desktop/frontend-formatter-demo/src/app/app.component.ts
  12:10  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any

âœ– 1 problem (1 error, 0 warnings)
```

è¯´æ˜å¤§åŠŸå‘Šæˆã€‚

# TL;DR;

è¿™æ˜¯é…ç½®çš„æºç ä»“åº“ï¼Œæ¯ä¸€èŠ‚å¯¹åº”ä¸€ä¸ªæäº¤è®°å½•ï¼š
[a-fly-fly-bird/frontend-formatter-demo](https://github.com/a-fly-fly-bird/frontend-formatter-demo/)

# Reference

## Common

- [commitlint](https://github.com/conventional-changelog/commitlint)
- [eslint-config-prettier](https://github.com/prettier/eslint-config-prettier)
- [eslint-plugin-prettier](https://github.com/prettier/eslint-plugin-prettier)
- [eslint](https://github.com/eslint/eslint)
- [lint-staged](https://github.com/lint-staged/lint-staged)
- [mrm](https://github.com/sapegin/mrm)
- [prettier-eslint](https://github.com/prettier/prettier-eslint)
- [prettier-eslint-cli](https://github.com/prettier/prettier-eslint-cli)
- [prettier](https://github.com/prettier/prettier)
- [stylelint](https://github.com/stylelint/stylelint)
- [typescript-eslint](https://github.com/typescript-eslint/typescript-eslint)
- [stylelint-config-prettier](https://github.com/prettier/stylelint-config-prettier)
- [stylelint-prettier](https://github.com/prettier/stylelint-prettier)
- [stylelint-config-sass-guidelines](https://github.com/bjankord/stylelint-config-sass-guidelines/tree/main)

## VS Code Plugin

- [prettier-vscode](https://github.com/prettier/prettier-vscode)
- [vscode-eslint](https://github.com/Microsoft/vscode-eslint)
- [vs-code-prettier-eslint](https://github.com/idahogurl/vs-code-prettier-eslint)
- [vscode-stylelint](https://github.com/stylelint/vscode-stylelint)
- [vscode-commitlint](https://github.com/joshbolduc/vscode-commitlint)

## For Angular

- [angular-eslint](https://github.com/angular-eslint/angular-eslint)
- [NX](https://github.com/nrwl/nx)

## æœ¬æ–‡å‚è€ƒ

- [Configure Prettier and ESLint with Angular ğŸ¨](https://justangular.com/blog/configure-prettier-and-eslint-with-angular)
- [Why and How to Lint like a PRO](https://medium.com/tbc-engineering/why-and-how-to-lint-like-a-pro-173fc4a73899)
